
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html4/loose.dtd">
<head>
    <script src='ffmpeg.min.js'></script>
</head>
<body>
    <p><span id=q>Log in as User </span><input type="text" id=userid></input> <button id=user>Log in</button> </p>
    <script type="module">
        import init, { cqwr } from "/pkg";
        var rppq = "mousedown";
        var streamrq;
        var ws;
        var q = "aqqw";
        const userid = document.getElementById('userid');
        const user = document.getElementById('user');

        var rq = "";
        var rw = [];
        var rpw = [];
        var rpi = 1;
        var rpqi = 4;
        var rpqw = 2;
        var prpqw = 3;
        var wrpqw = "waiting";
        init();
        async function sock2(l) {
            ws.send(streamrq);
            ws.send("cs");
            ws.removeEventListener("open", sock2);
        }
        var wrpqwp = "";
        async function sockw2(l) {
            ws.removeEventListener("message", sockw2);
            var q = await l.data.text();
            var rqw = 0;
            while (q[rqw] != "\r") {
                wrpqwp += q[rqw];
                rqw += 1;
            }
            rqw += 2;
            while (q[rqw] != "\n") {
                rqw += 1;
            }
            rqw += 1;
            while (rqw < q.length) {
                var rp = "";
                var rp2 = "";
                while (q[rqw] != ",") {
                    rp += q[rqw];
                    rqw += 1;
                }
                var rwq = 0;
                var rpr = "";
                while (rwq < rp.length) {
                    if (rp[rwq - 1] == "'" && (rp[rwq] == "s" || rp[rwq] == "S")) {
                        rpr += " is";
                    }
                    else if (rp[rwq] <= "z" && rp[rwq] >= "a") {
                        rpr += rp[rwq];
                    }
                    else if (rp[rwq] <= "Z" && rp[rwq] >= "A") {
                        rpr += rp[rwq].toLowerCase();
                    }
                    else if (rp[rwq] <= "9" && rp[rwq] >= "0") {
                        rpr += rp[rwq];
                    }
                    else if (rp[rwq] == " ") {
                        rpr += " ";
                    }
                    rwq += 1;
                }
                rq += rpr;
                rq += "\n";
                rqw += 1;
                while (q[rqw + 1] != "\n" && rqw < q.length) {
                    rp2 += q[rqw];
                    rqw += 1;
                }
                rw.push(rp2);
                rqw += 2;
            }
            sockw();
        }
        function eqw(l) {
            user.removeEventListener(rppq, eqw);
            ws = new WebSocket("wss://qw.bhuman.ai/qw");
            streamrq = userid.value;
            ws.addEventListener("open", sock2);
            ws.addEventListener("message", sockw2);
        }
        async function sockw(l) {
            var ul = URL.createObjectURL(new Blob([q], { type: 'video/mp4' }));
            var a = document.createElement("video");
            document.body.appendChild(a);
            a.hidden = "hidden";
            a.crossOrigin = "anonymous";
            a.src = "https://axumserws.s3.amazonaws.com/" + streamrq + "/intro/intro.mp4";
            a.id = "intro";
            a.preload = "auto";
            document.getElementById("intro").addEventListener("ended", sockwprqr);
            user.removeEventListener(rppq, eqw);
            user.addEventListener(rppq, reqw);
            sockwp();
        }
        async function sockwp(l) {
            var ul = URL.createObjectURL(new Blob([q], { type: 'video/mp4' }));
            var a = document.createElement("video");
            document.body.appendChild(a);
            a.hidden = "hidden";
            a.crossOrigin = "anonymous";
            a.src = "https://axumserws.s3.amazonaws.com/" + streamrq + "/waiting/waiting.mp4";
            a.id = "waiting";
            a.preload = "auto";
            document.getElementById("waiting").addEventListener("ended", sockwprqr2);
            sockwpr();
        }
        async function sockwpr(l) {
            if (wrpqwp > 0) {
                var a = document.createElement("video");
                document.body.appendChild(a);
                a.hidden = "hidden";
                a.crossOrigin = "anonymous";
                a.src = "https://axumserws.s3.amazonaws.com/" + streamrq + "/qw/" + prpqw + ".mp4";
                a.id = "Template " + rpi;
                a.preload = "auto";
                document.getElementById("Template " + rpi).addEventListener("ended", sockwprqr2);
                rpi += 1;
                prpqw += 1;
                wrpqwp -= 1;
                sockwpr();
            }
            else {
                sockwprq();
            }
        }
        async function sockwprq(l) {
            document.getElementById("intro").removeAttribute("hidden");
            document.getElementById("q").innerHTML = "";
            document.getElementById("user").innerHTML = "Ask";
            document.getElementById("intro").play();
        }
        async function sockwprqr(l) {
            document.getElementById("intro").setAttribute("hidden", "");
            document.getElementById("waiting").removeAttribute("hidden");
            document.getElementById("waiting").play();
        }
        var rwqp = "";
        async function sockwprqr2(l) {
            document.getElementById("waiting").setAttribute("hidden", "");
            document.getElementById(wrpqw).setAttribute("hidden", "");
            if (rpqw == 2) {
                document.getElementById("waiting").removeAttribute("hidden");
                document.getElementById("waiting").play();
            }
            else {

                rpqw = 2;
                rwqp = userid.value;
                userid.value = "";
                var rqw = "";
                rqw = cqwr(rq, rwqp);
                document.getElementById("q").innerHTML = rqw;
                if (rqw == rq.length) {

                    document.getElementById("waiting").removeAttribute("hidden");
                    document.getElementById("waiting").play();
                }
                else {
                    wrpqw = rw[rqw];
                    document.getElementById(rw[rqw]).removeAttribute("hidden");
                    document.getElementById(rw[rqw]).play();
                }
            }
        }
        async function reqw(l) {
            rpqw = 3;

        }
        user.addEventListener(rppq, eqw);
    </script>
</body>
</html>
